<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Relatório de Visitas (Responsivo)</title>
    <style>
        /* Variáveis CSS */
        :root {
            --cor-principal: #1e3a8a;
            --cor-secundaria: #3b82f6;
            --cor-sucesso: #10b981;
            --cor-erro: #ef4444;
            --cor-aviso: #fcd34d;
        }

        /* Estilos Globais e Reset Básico */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 1.5rem; 
            background-color: #eef2f7;
            color: #333;
        }
        .container {
            max-width: 750px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: var(--cor-principal);
            margin-bottom: 1.5rem;
            font-size: 1.8rem; 
        }
        h2 {
            text-align: center;
            color: #4b5563;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
            font-size: 1.3rem; 
        }
        
        /* Botões de Contagem */
        .botoes-contagem {
            display: flex;
            justify-content: space-around;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }
        .botao-grupo {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .botoes-incremento-decremento {
            display: flex;
            align-items: stretch; 
            gap: 0.5rem;
            width: 100%; 
            max-width: 250px; 
        }

        .botao-grupo button {
            padding: 0.8rem 0.5rem; 
            font-size: 1rem; 
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
        }
        
        /* Botão de Incremento Principal (+1) */
        .botoes-incremento-decremento > button:first-child {
            flex-grow: 3; 
            padding: 1rem 0.8rem; 
            font-size: 1.1rem;
        }

        /* Botão de Decremento (-1) */
        .btn-decremento {
            padding: 0.5rem 0.6rem !important;
            font-size: 1rem !important;
            background-color: #9ca3af !important; 
            color: white !important;
        }
        .btn-decremento:hover {
            background-color: #6b7280 !important;
            transform: translateY(-1px);
        }

        #btnProcedente {
            background-color: var(--cor-sucesso);
            color: white;
        }
        #btnProcedente:hover {
            background-color: #059669;
            transform: translateY(-2px);
        }
        #btnImprocedente {
            background-color: var(--cor-erro);
            color: white;
        }
        #btnImprocedente:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        .contador-label {
            font-weight: 600;
            margin-top: 0.8rem;
            font-size: 1.1rem;
            color: var(--cor-secundaria);
        }
        
        /* Botões de Geração de Relatório */
        .botoes-geracao {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .botoes-geracao button {
            flex-grow: 1;
            padding: 0.8rem 1rem;
            font-size: 0.95rem;
            font-weight: 600;
            border: 2px solid transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #btnGerarParcial {
            background-color: var(--cor-aviso); 
            color: #333;
        }
        #btnGerarFinal {
            background-color: var(--cor-secundaria); 
            color: white;
        }

        /* Área do Relatório */
        #relatorio {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            box-sizing: border-box;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            resize: vertical;
            font-family: 'Consolas', monospace;
            white-space: pre-wrap;
            background-color: #f9fafb;
            font-size: 0.9rem;
        }
        
        /* Botão de Copiar e Reset */
        #copiarRelatorio {
            display: block;
            width: 100%;
            padding: 0.8rem;
            margin-top: 1rem;
            background-color: #14b8a6; 
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
        }
        #copiarRelatorio:hover {
            background-color: #0d9488;
        }
        #btnResetar {
            display: block;
            width: 100%;
            padding: 0.6rem;
            margin-top: 1rem;
            background-color: #f97316; 
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        #btnResetar:hover:not(:disabled) {
            background-color: #ea580c;
        }
        #btnResetar:disabled {
            /* Mantido apenas se a lógica do botão for desativar, mas a nova lógica não desativa */
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Mensagem de Feedback */
        .mensagem {
            text-align: center;
            margin-top: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Media Query para Celulares */
        @media (max-width: 600px) {
            body {
                padding: 1rem;
            }
            .container {
                padding: 1rem;
            }
            h1 {
                font-size: 1.5rem;
            }
            
            /* Empilha os grupos de botões na vertical */
            .botoes-contagem {
                flex-direction: column;
                gap: 1.5rem;
            }
            .botao-grupo {
                padding: 0 0.5rem;
            }

            /* Faz os botões de Parcial/Final ocuparem toda a largura */
            .botoes-geracao {
                flex-direction: column;
                gap: 0.5rem;
            }
            .botoes-geracao button {
                padding: 0.7rem 1rem;
            }

            /* Ajuste de fonte na área de relatório para telas menores */
            #relatorio {
                font-size: 0.85rem;
                min-height: 120px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Controle de Visitas de Imóveis</h1>

    <div class="botoes-contagem">
        <div class="botao-grupo">
            <div class="botoes-incremento-decremento">
                <button id="btnProcedente">+1 Procedente</button>
                <button class="btn-decremento" id="btnRemoverProcedente">-1</button>
            </div>
            <div class="contador-label">Contagem: <span id="contadorProcedente">0</span></div>
        </div>
        <div class="botao-grupo">
            <div class="botoes-incremento-decremento">
                <button id="btnImprocedente">+1 Improcedente</button>
                <button class="btn-decremento" id="btnRemoverImprocedente">-1</button>
            </div>
            <div class="contador-label">Contagem: <span id="contadorImprocedente">0</span></div>
        </div>
    </div>

    <h2>Gerar Relatório</h2>
    
    <div class="botoes-geracao">
        <button id="btnGerarParcial">Gerar Relatório Parcial</button>
        <button id="btnGerarFinal">Gerar Relatório Final</button>
    </div>

    <textarea id="relatorio" readonly placeholder="Gere um relatório Parcial ou Final para visualizar e copiar..."></textarea>

    <button id="copiarRelatorio">Copiar Relatório Gerado</button>
    
    <p class="mensagem" id="mensagemCopia"></p>

    <button id="btnResetar">RESETAR TODOS OS CONTADORES (Clique 2x para confirmar)</button>
</div>

<script>
    // --- Configuração de Persistência e Variáveis ---
    const KEY_PROCEDENTE = 'countProcedente';
    const KEY_IMPROCEDENTE = 'countImprocedente';
    const COOLDOWN_RESET_SECONDS = 5; // Tempo limite para o segundo clique

    let countProcedente = parseInt(localStorage.getItem(KEY_PROCEDENTE) || 0);
    let countImprocedente = parseInt(localStorage.getItem(KEY_IMPROCEDENTE) || 0);
    let isResetConfirmed = false;
    let resetTimer = null;

    // Elementos do DOM
    const displayProcedente = document.getElementById('contadorProcedente');
    const displayImprocedente = document.getElementById('contadorImprocedente');
    const relatorioArea = document.getElementById('relatorio');
    const mensagemCopia = document.getElementById('mensagemCopia');
    const btnResetar = document.getElementById('btnResetar');

    // --- Funções de Estado e Persistência ---

    function init() {
        displayProcedente.textContent = countProcedente;
        displayImprocedente.textContent = countImprocedente;
    }

    function salvarContadores() {
        localStorage.setItem(KEY_PROCEDENTE, countProcedente);
        localStorage.setItem(KEY_IMPROCEDENTE, countImprocedente);
    }

    function limparFeedback() {
        relatorioArea.value = ""; 
        // Não limpa mensagemCopia aqui, pois ela é essencial para o feedback do reset
    }

    // --- Funções de Contagem ---

    function alterarContador(tipo, valor) {
        if (tipo === 'procedente') {
            countProcedente = Math.max(0, countProcedente + valor);
            displayProcedente.textContent = countProcedente;
        } else if (tipo === 'improcedente') {
            countImprocedente = Math.max(0, countImprocedente + valor);
            displayImprocedente.textContent = countImprocedente;
        }
        
        salvarContadores();
        
        // Limpa a área do relatório, mas mantém o feedback do reset
        if (relatorioArea.value !== "") {
             relatorioArea.value = ""; 
        }
    }

    // --- Funções de Relatório ---

    function gerarTextoRelatorio(tipo) {
        const total = countProcedente + countImprocedente;
        let cabecalho;
        
        if (tipo === 'PARCIAL') {
            // Removido o carimbo de data/hora do relatório parcial
            cabecalho = `RELATÓRIO PARCIAL`; 
        } else { // FINAL
            cabecalho = `RELATÓRIO FINAL`;
        }

        const relatorioTexto = `
${cabecalho}

IMÓVEIS VISITADOS: ${total}

PROCEDENTES: ${countProcedente}

IMPROCEDENTES: ${countImprocedente}
        `.trim(); 

        return relatorioTexto;
    }

    function gerarRelatorio(tipo) {
        if (countProcedente + countImprocedente === 0) {
            alert("Nenhum imóvel visitado para gerar o relatório.");
            return;
        }
        relatorioArea.value = gerarTextoRelatorio(tipo);

        if (tipo === 'PARCIAL') {
            mensagemCopia.textContent = "Relatório Parcial gerado.";
            mensagemCopia.style.backgroundColor = "#fcd34d30";
            mensagemCopia.style.color = "#a16207";
        } else { // FINAL
            mensagemCopia.textContent = "Relatório FINAL gerado. Contagens mantidas.";
            mensagemCopia.style.backgroundColor = "#3b82f630";
            mensagemCopia.style.color = "#1e40af";
        }
    }

    // --- Função de Cópia ---

    function copiarRelatorio() {
        if (relatorioArea.value === "") {
            mensagemCopia.textContent = "Gere um relatório Parcial ou Final primeiro!";
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
            return;
        }

        relatorioArea.select(); 
        relatorioArea.setSelectionRange(0, 99999); 
        
        navigator.clipboard.writeText(relatorioArea.value).then(() => {
            mensagemCopia.textContent = '✅ Relatório copiado com sucesso para a área de transferência!';
            mensagemCopia.style.backgroundColor = "#a7f3d0";
            mensagemCopia.style.color = "#047857";
            setTimeout(() => {
                mensagemCopia.textContent = '';
                mensagemCopia.style.backgroundColor = "transparent";
            }, 3000);
        }).catch(err => {
            mensagemCopia.textContent = 'Erro ao copiar. Por favor, selecione e use Ctrl+C.';
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
        });
    }

    // --- Função de Reset (Duplo Clique) ---

    function efetuarReset() {
        countProcedente = 0;
        countImprocedente = 0;
        salvarContadores();
        init(); 
        
        // Limpar a área de texto do relatório após o reset
        relatorioArea.value = ""; 

        mensagemCopia.textContent = "Contadores resetados para 0 e salvos PERMANENTEMENTE.";
        mensagemCopia.style.backgroundColor = "#fed7aa";
        mensagemCopia.style.color = "#c2410c";
        
        // Finaliza o estado de confirmação e cooldown
        isResetConfirmed = false;
        clearTimeout(resetTimer);
        resetTimer = null;
    }

    function resetarContadores() {
        // Limpa feedback anterior (exceto do reset)
        if (relatorioArea.value !== "") {
            mensagemCopia.textContent = '';
            mensagemCopia.style.backgroundColor = 'transparent';
        }

        if (isResetConfirmed) {
            // Segundo clique: Confirmação recebida
            efetuarReset();
        } else {
            // Primeiro clique: Inicia a janela de confirmação
            isResetConfirmed = true;
            
            mensagemCopia.textContent = `⚠️ Clique novamente no botão em até ${COOLDOWN_RESET_SECONDS}s para confirmar a limpeza total.`;
            mensagemCopia.style.backgroundColor = "#fef08a";
            mensagemCopia.style.color = "#a16207";

            // Cooldown: se não houver o segundo clique no tempo, cancela a confirmação
            resetTimer = setTimeout(() => {
                isResetConfirmed = false;
                mensagemCopia.textContent = 'Confirmação expirada. Para resetar, clique no botão duas vezes.';
                mensagemCopia.style.backgroundColor = "#fed7aa";
                mensagemCopia.style.color = "#c2410c";
                resetTimer = null;
            }, COOLDOWN_RESET_SECONDS * 1000);
        }
    }

    // --- Event Listeners ---
    document.getElementById('btnProcedente').addEventListener('click', () => alterarContador('procedente', 1));
    document.getElementById('btnImprocedente').addEventListener('click', () => alterarContador('improcedente', 1));
    document.getElementById('btnRemoverProcedente').addEventListener('click', () => alterarContador('procedente', -1));
    document.getElementById('btnRemoverImprocedente').addEventListener('click', () => alterarContador('improcedente', -1));
    document.getElementById('btnGerarParcial').addEventListener('click', () => gerarRelatorio('PARCIAL'));
    document.getElementById('btnGerarFinal').addEventListener('click', () => gerarRelatorio('FINAL'));
    document.getElementById('copiarRelatorio').addEventListener('click', copiarRelatorio);
    btnResetar.addEventListener('click', resetarContadores);

    // Inicializa a página
    init();
</script>

</body>
</html>
imparFeedback();
    }

    // --- Funções de Relatório ---

    function gerarTextoRelatorio(tipo) {
        const total = countProcedente + countImprocedente;
        let cabecalho;
        
        if (tipo === 'PARCIAL') {
            // Removido "GERADO EM: dataHora" conforme solicitado
            cabecalho = `RELATÓRIO PARCIAL`; 
        } else { // FINAL
            cabecalho = `RELATÓRIO FINAL`;
        }

        const relatorioTexto = `
${cabecalho}

IMÓVEIS VISITADOS: ${total}

PROCEDENTES: ${countProcedente}

IMPROCEDENTES: ${countImprocedente}
        `.trim(); 

        return relatorioTexto;
    }

    function gerarRelatorio(tipo) {
        if (countProcedente + countImprocedente === 0) {
            alert("Nenhum imóvel visitado para gerar o relatório.");
            return;
        }
        relatorioArea.value = gerarTextoRelatorio(tipo);

        if (tipo === 'PARCIAL') {
            mensagemCopia.textContent = "Relatório Parcial gerado.";
            mensagemCopia.style.backgroundColor = "#fcd34d30";
            mensagemCopia.style.color = "#a16207";
        } else { // FINAL
            mensagemCopia.textContent = "Relatório FINAL gerado. Contagens mantidas.";
            mensagemCopia.style.backgroundColor = "#3b82f630";
            mensagemCopia.style.color = "#1e40af";
        }
    }

    // --- Função de Cópia ---

    function copiarRelatorio() {
        if (relatorioArea.value === "") {
            mensagemCopia.textContent = "Gere um relatório Parcial ou Final primeiro!";
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
            return;
        }

        relatorioArea.select(); 
        relatorioArea.setSelectionRange(0, 99999); 
        
        navigator.clipboard.writeText(relatorioArea.value).then(() => {
            mensagemCopia.textContent = '✅ Relatório copiado com sucesso para a área de transferência!';
            mensagemCopia.style.backgroundColor = "#a7f3d0";
            mensagemCopia.style.color = "#047857";
            setTimeout(() => {
                mensagemCopia.textContent = '';
                mensagemCopia.style.backgroundColor = "transparent";
            }, 3000);
        }).catch(err => {
            mensagemCopia.textContent = 'Erro ao copiar. Por favor, selecione e use Ctrl+C.';
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
        });
    }

    // --- Função de Reset com Confirmação e Cooldown ---

    function efetuarReset() {
        countProcedente = 0;
        countImprocedente = 0;
        salvarContadores();
        init(); 
        limparFeedback();
        
        mensagemCopia.textContent = "Contadores resetados para 0 e salvos PERMANENTEMENTE.";
        mensagemCopia.style.backgroundColor = "#fed7aa";
        mensagemCopia.style.color = "#c2410c";
        
        isResetConfirmed = false;
        btnResetar.textContent = 'RESETAR TODOS OS CONTADORES (Precisa de Confirmação)';
        btnResetar.disabled = false;
        clearTimeout(resetTimer);
        resetTimer = null;
    }

    function resetarContadores() {
        if (!isResetConfirmed) {
            isResetConfirmed = true;
            btnResetar.disabled = true;
            let tempoRestante = COOLDOWN_RESET_SECONDS;
            
            mensagemCopia.textContent = `Aperte novamente em ${tempoRestante}s para confirmar o RESET.`;
            mensagemCopia.style.backgroundColor = "#fef08a";
            mensagemCopia.style.color = "#a16207";

            btnResetar.textContent = `Aguarde para Confirmar (${tempoRestante}s)`;

            const interval = setInterval(() => {
                tempoRestante--;
                if (tempoRestante > 0) {
                    btnResetar.textContent = `Aguarde para Confirmar (${tempoRestante}s)`;
                    mensagemCopia.textContent = `Aperte novamente em ${tempoRestante}s para confirmar o RESET.`;
                } else {
                    clearInterval(interval);
                    btnResetar.disabled = false;
                    btnResetar.textContent = 'CLIQUE PARA CONFIRMAR O RESET!';
                    mensagemCopia.textContent = 'CONFIRME O RESET AGORA!';
                }
            }, 1000);

            resetTimer = setTimeout(() => {
                if (isResetConfirmed) {
                    isResetConfirmed = false;
                    btnResetar.textContent = 'RESETAR TODOS OS CONTADORES (Precisa de Confirmação)';
                    mensagemCopia.textContent = '';
                    mensagemCopia.style.backgroundColor = "transparent";
                }
            }, COOLDOWN_RESET_SECONDS * 1000);

        } else if (btnResetar.disabled === false) {
            efetuarReset();
        }
    }

    // --- Event Listeners ---
    document.getElementById('btnProcedente').addEventListener('click', () => alterarContador('procedente', 1));
    document.getElementById('btnImprocedente').addEventListener('click', () => alterarContador('improcedente', 1));
    document.getElementById('btnRemoverProcedente').addEventListener('click', () => alterarContador('procedente', -1));
    document.getElementById('btnRemoverImprocedente').addEventListener('click', () => alterarContador('improcedente', -1));
    document.getElementById('btnGerarParcial').addEventListener('click', () => gerarRelatorio('PARCIAL'));
    document.getElementById('btnGerarFinal').addEventListener('click', () => gerarRelatorio('FINAL'));
    document.getElementById('copiarRelatorio').addEventListener('click', copiarRelatorio);
    btnResetar.addEventListener('click', resetarContadores);

    // Inicializa a página
    init();
</script>

</body>
</html>
tring('pt-BR');
            cabecalho = `RELATÓRIO PARCIAL - GERADO EM: ${dataHora}`;
        } else { // FINAL
            cabecalho = `RELATÓRIO FINAL`; // Sem data, conforme solicitado
        }

        const relatorioTexto = `
${cabecalho}

IMÓVEIS VISITADOS: ${total}

PROCEDENTES: ${countProcedente}

IMPROCEDENTES: ${countImprocedente}
        `.trim(); 

        return relatorioTexto;
    }

    function gerarRelatorio(tipo) {
        if (countProcedente + countImprocedente === 0) {
            alert("Nenhum imóvel visitado para gerar o relatório.");
            return;
        }
        relatorioArea.value = gerarTextoRelatorio(tipo);

        if (tipo === 'PARCIAL') {
            mensagemCopia.textContent = "Relatório Parcial gerado.";
            mensagemCopia.style.backgroundColor = "#fcd34d30";
            mensagemCopia.style.color = "#a16207";
        } else { // FINAL
            mensagemCopia.textContent = "Relatório FINAL gerado. Contagens mantidas.";
            mensagemCopia.style.backgroundColor = "#3b82f630";
            mensagemCopia.style.color = "#1e40af";
        }
    }

    // --- Função de Cópia (Sem alterações significativas) ---

    function copiarRelatorio() {
        if (relatorioArea.value === "") {
            mensagemCopia.textContent = "Gere um relatório Parcial ou Final primeiro!";
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
            return;
        }

        relatorioArea.select(); 
        relatorioArea.setSelectionRange(0, 99999); 
        
        navigator.clipboard.writeText(relatorioArea.value).then(() => {
            mensagemCopia.textContent = '✅ Relatório copiado com sucesso para a área de transferência!';
            mensagemCopia.style.backgroundColor = "#a7f3d0";
            mensagemCopia.style.color = "#047857";
            setTimeout(() => {
                mensagemCopia.textContent = '';
                mensagemCopia.style.backgroundColor = "transparent";
            }, 3000);
        }).catch(err => {
            mensagemCopia.textContent = 'Erro ao copiar. Por favor, selecione e use Ctrl+C.';
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
        });
    }

    // --- Função de Reset com Confirmação e Cooldown ---

    function efetuarReset() {
        countProcedente = 0;
        countImprocedente = 0;
        salvarContadores();
        init(); 
        limparFeedback();
        
        mensagemCopia.textContent = "Contadores resetados para 0 e salvos PERMANENTEMENTE.";
        mensagemCopia.style.backgroundColor = "#fed7aa";
        mensagemCopia.style.color = "#c2410c";
        
        // Finaliza o estado de confirmação e cooldown
        isResetConfirmed = false;
        btnResetar.textContent = 'RESETAR TODOS OS CONTADORES (Precisa de Confirmação)';
        btnResetar.disabled = false;
        clearTimeout(resetTimer);
        resetTimer = null;
    }

    function resetarContadores() {
        if (!isResetConfirmed) {
            // Primeiro clique: Inicia o cooldown e pede confirmação
            
            isResetConfirmed = true;
            btnResetar.disabled = true;
            let tempoRestante = COOLDOWN_RESET_SECONDS;
            
            mensagemCopia.textContent = `Aperte novamente em ${tempoRestante}s para confirmar o RESET.`;
            mensagemCopia.style.backgroundColor = "#fef08a";
            mensagemCopia.style.color = "#a16207";

            btnResetar.textContent = `Aguarde para Confirmar (${tempoRestante}s)`;

            const interval = setInterval(() => {
                tempoRestante--;
                if (tempoRestante > 0) {
                    btnResetar.textContent = `Aguarde para Confirmar (${tempoRestante}s)`;
                    mensagemCopia.textContent = `Aperte novamente em ${tempoRestante}s para confirmar o RESET.`;
                } else {
                    clearInterval(interval);
                    btnResetar.disabled = false;
                    btnResetar.textContent = 'CLIQUE PARA CONFIRMAR O RESET!';
                    mensagemCopia.textContent = 'CONFIRME O RESET AGORA!';
                }
            }, 1000);

            resetTimer = setTimeout(() => {
                // Se o usuário não clicou após o cooldown, volta ao estado inicial
                if (isResetConfirmed) {
                    isResetConfirmed = false;
                    btnResetar.textContent = 'RESETAR TODOS OS CONTADORES (Precisa de Confirmação)';
                    mensagemCopia.textContent = '';
                    mensagemCopia.style.backgroundColor = "transparent";
                }
            }, COOLDOWN_RESET_SECONDS * 1000);

        } else if (btnResetar.disabled === false) {
            // Segundo clique (após o cooldown): Efetua o reset
            efetuarReset();
        }
    }

    // --- Event Listeners ---
    document.getElementById('btnProcedente').addEventListener('click', () => alterarContador('procedente', 1));
    document.getElementById('btnImprocedente').addEventListener('click', () => alterarContador('improcedente', 1));
    document.getElementById('btnRemoverProcedente').addEventListener('click', () => alterarContador('procedente', -1));
    document.getElementById('btnRemoverImprocedente').addEventListener('click', () => alterarContador('improcedente', -1));
    document.getElementById('btnGerarParcial').addEventListener('click', () => gerarRelatorio('PARCIAL'));
    document.getElementById('btnGerarFinal').addEventListener('click', () => gerarRelatorio('FINAL'));
    document.getElementById('copiarRelatorio').addEventListener('click', copiarRelatorio);
    btnResetar.addEventListener('click', resetarContadores);

    // Inicializa a página
    init();
</script>

</body>
</html>
agemCopia.textContent = '';
                mensagemCopia.style.backgroundColor = "transparent";
            }, 3000);
        }).catch(err => {
            // Fallback
            mensagemCopia.textContent = 'Erro ao copiar. Por favor, selecione e use Ctrl+C.';
            mensagemCopia.style.backgroundColor = "#fecaca";
            mensagemCopia.style.color = "#b91c1c";
        });
    }

    // Função para resetar manualmente todos os contadores
    function resetarContadores() {
        if (confirm("ATENÇÃO: Você tem certeza que deseja RESETAR permanentemente todos os contadores? Esta ação não pode ser desfeita.")) {
            countProcedente = 0;
            countImprocedente = 0;
            salvarContadores();
            init(); // Atualiza a tela
            relatorioArea.value = "";
            mensagemCopia.textContent = "Contadores resetados para 0 e salvos.";
            mensagemCopia.style.backgroundColor = "#fed7aa";
            mensagemCopia.style.color = "#c2410c";
        }
    }

    // Adiciona os event listeners
    document.getElementById('btnProcedente').addEventListener('click', () => incrementarContador('procedente'));
    document.getElementById('btnImprocedente').addEventListener('click', () => incrementarContador('improcedente'));
    document.getElementById('btnGerarParcial').addEventListener('click', gerarRelatorioParcial);
    document.getElementById('btnGerarFinal').addEventListener('click', gerarRelatorioFinal);
    document.getElementById('copiarRelatorio').addEventListener('click', copiarRelatorio);
    document.getElementById('btnResetar').addEventListener('click', resetarContadores);

    // Inicializa a página
    init();
</script>

</body>
</html>
